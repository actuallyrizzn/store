# Example Nginx server block for Clawed Road (LEMP).
# Document root = public/ (synced folder). PHP-FPM handles .php.
# LEMP design: URL path = file path. One script per endpoint; no front controller for API/admin.
#
# API and admin URLs include .php: /api/stores.php, /admin/config.php, etc.
# Only / is served by index.php (try_files fallback). Copy and adapt.

server {
    listen 80;
    server_name localhost;
    root /path/to/store/app/public;

    index index.php;

    # / â†’ index.php; /api/foo.php and /admin/bar.php served as real files (location ~ \.php$)
    location / {
        try_files $uri $uri/ /index.php;
    }

    location ~ \.php$ {
        fastcgi_pass unix:/run/php/php-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
        fastcgi_param PHP_VALUE "env_path=/path/to/store/app/.env";
    }

    location ~ /\. {
        deny all;
    }
}
